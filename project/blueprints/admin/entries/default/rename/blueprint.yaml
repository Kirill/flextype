title: Rename entry
icon:
  set: bootstrap
  name: file-alt
blocks:
  - type: Container
    properties:
      class: mt-4
    blocks:
      - type: Row
        properties:
          class: justify-content-center
        blocks:
          - type: Column
            properties:
              size: 6/12
            blocks:
              - type: Heading
                properties:
                  size: large
                  value: "{{ __('admin_rename_content') }}"
                  class: mb-4
              - type: Form
                properties:
                  name: form_entries_rename
                  process:
                    fields:
                      - name: id
                        properties:
                          type: string
                          value: "{{ query.id }}"
                      - name: new_id
                        properties:
                          type: string
                          value: |
                            {% if registry().get('plugins.admin.settings.entries.slugify') %}
                              {{ (strings(query.id).contains('/') ? arraysFromString(query.id, '/').slice(0, -1).toString('/') : query.id) ~ '/' ~ flextype.slugify.slugify(_form.registry.data.name) }}
                            {% else %}
                              {{ (strings(query.id).contains('/') ? arraysFromString(query.id, '/').slice(0, -1).toString('/') : query.id) ~ '/' ~ _form.registry.data.name }}
                            {% endif %}
                    messages: 
                      error: "{{ __('admin_message_entries_was_not_renamed') }}"
                      success: "{{ __('admin_message_entries_renamed') }}"
                    redirect:
                      route: admin.entries.index
                      args:
                        id: "{{ (strings(query.id).contains('/') ? arraysFromString(query.id, '/').slice(0, -1).toString('/') : query.id) }}" 
                blocks:
                  - type: Column
                    properties:
                      size: 12
                    blocks:
                      - type: InputText
                        properties:
                          name: name
                          label:
                            value: "{{ __('admin_name') }}"
                          help: "{{ __('admin_help_text_for_entries_name') }}"
                          value: "{{ arraysFromString(query.id, '/').last() }}"
                          validation:
                            required: true
                            minlength: 1
                            errorMessage: "{{ __('admin_error_name_empty_input') }}"
                      - type: Column
                        properties:
                          size: 12
                          class: pt-4
                        blocks:
                          - type: InputSubmit
                            properties:
                              type: primary
                              value: "{{ __('admin_rename') }}"